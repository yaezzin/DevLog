## 정규화

정규화란 관계형 데이터베이스에서 중복을 최소화하기 위해 데이터를 구조화하는 작업

→ 릴레이션의 애트리뷰트들을 나누어 작은 릴레션으로 무손실 분해하는 작업

#### 💡 개념정리

<img width="400" alt="스크린샷 2022-08-17 오후 11 00 22" src="https://user-images.githubusercontent.com/97823928/185153545-f22bb6fd-902b-4674-9ddd-cca74faa01c4.png">


## 제 1 정규형

애트리뷰트의 도메인이 오직 ```원자값```만을 포함하는 상태.

|이름|취미| → |이름|취미|
|----|----|----|-----|------|
|승관|케이팝||승관|케이팝|
|유진|영화, 음악||유진|영화|
|원영|음악, 쇼핑||유진|음악|
|형원|음악||원영|음악|
|기범|게임||원영|쇼핑|
||||형원|음악|
||||기범|게임|

* 유진이와 원영은 여러개의 취미를 가지므로 이를 제 1 정규화를 통해 분해 가능하다.
* 하나의 애트리뷰트가 하나의 값을 가지도록 분해!

## 제 2 정규형

제 1 정규화를 진행한 테이블에 대해 ```완전 함수 종속```을 만족하도록 테이블을 분해하는 것

```text
# 완전 함수적 종속
- X → Y라고 가정했을 때, X의 어떠한 애트리뷰트라도 제거하면 더이상 함수적 종속성이 성립하지 않는 경우
- 키가 아닌 열들이 각각의 후보키에 대해 결정되는 릴레이션 형태
```

|학생번호|강좌이름|강의실|성적|
|------|------|-----|------|
|501| 데이터베이스|공학관 110| 3.5|
|401|데이터베이스|공학관 110|4.0|
|402|네트워크|공학관201|3.5|
|503|알고리즘|공학관 111|4.5|
|501|알고리즘|공학관111|3.5|

위와 같은 수강강좌 테이블이 있다고 가정하자.
* 이 테이블의 기본 키는 (학생번호, 강좌이름)의 복합키로 구성되어있다.
* 이 복합키가 성적을 결정하는데, 여기서 강의실 컬럼은 기본키의 부분집합인 강좌이름에 의해 결정될 수 있다.
* 이처럼 기본키(학생번호, 강좌이름)의 부분키인 강좌이름이 결정자이므로, 기존 테이블에서 강의실을 분해하여 별
도의 테이블로 관리할 수 있다.

|학생번호|강좌이름|성적| +  |강좌이름|강의실|
|----|-------|--------|-----|-------|-----|
|501|데이터베이스|3.5||데이터베이스|공학관110|
|401|데이터베이스|4.0||네트워크|공학관201|
| ... | ... | ...||알고리즘|공학관111|

* (학생번호, 강좌이름) → 성적 // 강좌이름 → 강의실

## 제 3 정규형

제 3정규화는 제 2정규화를 진행한 테이블에 ```이행적 종속을 제거하도록``` 테이블을 분해

```text
# 이행 함수적 종속
- X → Y, Y → Z의 경우에서 추론될 수 있는 X → Z의 종속관계
```

|학생번호|강좌이름|수강료|
|------|------|-----|
|501| 데이터베이스|20000|
|401|데이터베이스|20000|
|402|네트워크|15000|
|503|알고리즘|25000|

이 테이블의 경우 학생번호는 강좌이름을, 강좌이름은 수강료를 결정하고 있다. 이 경우 학생번호가 수강료를 결정하는 종속관계를 추론할 수 있는데, 이때 (학생번호, 강좌이름), (강좌이름, 수강료) 테이블로 분해해야 한다.

|학생번호|강좌이름| +| 강좌이름| 수강료|
|------|------|-----|--------|------|
|501| 데이터베이스| |데이터베이스|20000|
|401|데이터베이스| |네트워크|15000|
|402|네트워크| | 알고리즘| 25000|
|503|알고리즘| |||

이행적 종속을 제거하는 이유 ?
* 만약 501번 학생이 데이터베이스 대신 네트워크 강좌를 수강하게 된다면 네트워크강좌를 2만원에 듣게 된다.
* 물론 직접 수강료를 변경해줄 수 있지만 이러한 번거로움을 제거하기 위해 제 3정규화를 하게 된다.

## BCNF (Boyce-Codd) 정규화

제 3정규화를 진행한 테이블에 대해 ```모든 결정자가 후보키```가 되도록 테이블을 분해하는 것

|학생번호 | 특강이름| 교수|
|----------|-------|---|
|501|데이터베이스|심교수|
|401|데이터베이스|심교수|
|402|알고리즘|박교수|
|403|알고리즘|이교수|
|302|선형대수|홍교수|


다음과 같은 테이블이 있다고 해보자
* 이 테이블의 기본키는 (학생번호, 특강이름)이며, 이 기본키는 교수를 결정하고 있다.
* 교수는 특강이름을 결정하는 결정자이지만 후보키가 아니다

BCNF 정규형을 만족하기 위해서 다음과 같이 분해할 수 있다.

|학생번호|교수| + | 특강이름|교수|
|----|-----|-----|-----|------|
|501|김교수| |데이터베이스|심교수|
|401|심교수| |알고리즘|박교수|
|402|박교수| |알고리즘|이교수|
|403|이교수| |선형대수|홍교수|
|302|홍교수| ||

```text
# 후보키
- 테이블에서 각 행을 유일하게 식별할 수 있는 최소한의 속성들의 집합이다. 
```

## 참고자료
* https://mangkyu.tistory.com/110?category=761304
* https://computer-science-student.tistory.com/194


