# 운영체제

## 운영체제란 ?

운영체제는 컴퓨터 사용자와 컴퓨터 하드웨어 간의 인터페이스로서 동작하여 사용자가 컴퓨터를 편리하고, 효과적으로 사용할 수 있도록 환경을 제공한다.
또한, 컴퓨터 시스템을 관리하고 제어하여 프로그램의 실행과 자원 할당을 조정하는 소프트웨어이다.   

> 운영체제가 없다면 ?

* 1+1을 하는 간단한 프로그램 조차도 운영체제가 없다면 메모리에 적재하는 코드, CPU로 하여금 1+1을 더하게 하는 코드, 모니터에 결과를 출력하는 코드를 모두 개발자가 직접 작성해야 할 것이다..!


## 핵심 서비스

운영체제의 핵심 서비스는 ```프로세스 관리```, ```자원 접근 및 할당```, ```파일 시스템 관리```이다.

### 1 ) 프로세스 관리

일반적으로 하나의 CPU는 하나의 프로세스만 실행할 수 있기 때문에 CPU는 이 프로세스들을 번갈아 가며 실행한다.  
운영체제는 프로세스의 생성, 종료, 정지, 재개 등을 관리하고 각 프로세스에게 CPU 시간을 할당하여 공평하게 실행되도록 조정하는 역할을 한다.

### 2 ) 자원 접근 및 할당

모든 프로세스는 실행을 위한 자원을 필요로 하는데, 이때 운영체제가 프로세스에 필요한 자원을 할당해준다.

#### 📍 CPU

일반적으로 메모리에는 여러 프로세스가 적재되고, 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있다.  
그래서 하나의 프로세스가 CPU를 이용하고 있다면 다른 프로세스는 기다려야 하는데, 이때 운영체제는 **CPU 스케줄링**을 통해
프로세스에게 공정하게 CPU를 할당하기 위해 어떤 프로세스부터 CPU 이용을 하게할 것인지, 얼마나 오래 사용할지를 결정한다.

#### 📍 메모리

메모리에 적재된 프로세스들은 크기, 적재되는 주소가 모두 다르며, 같은 프로세스더라도 실행할 때마다 적재되는 주소가 달라질 수 있다.
그래서 운영체제는 새로운 프로세스가 적재될 때 어느 주소에 적재해야 할지를 결정해야 하는데, 이때 운영체제는 **가상 메모리**와 **주소 변환**을 사용하여 메모리 공간을 할당한다.

#### 📍 입출력 장치

입출력장치가 CPU에 하드웨어 인터럽트 요청 신호를 보내면 CPU는 하던 일을 잠시 백업한 뒤 커널 영역에 있는 인터럽트 서비스 루틴을 실행한다.  
이처럼 운영체제는 인터럽트를 처리하는 프로그램을 제공함으로써 입출력 작업을 수행한다.

### 3 ) 파일 시스템 관리

운영체제는 파일들을 생성하고, 삭제하고, 열고 그리고 이 파일들을 묶어 디렉터리로 관리하는 **파일 시스템**도 지원한다.

## 운영체제 구조

<img width="323" alt="스크린샷 2023-06-23 오전 11 48 46" src="https://github.com/yaezzin/TIL/assets/97823928/68f9248e-2240-46ea-b234-e425704a7723">

운영체제 또한 여느 프로그램과 마찬가지로 메모리에 적재되어야 한다. 하지만 운영체제처럼 큰 규모의 프로그램이 메모리에 모두 올라간다면 메모리 낭비가 발생하게된다. 
따라서 컴퓨터가 부팅될 때 필요한 부분만 메모리에 올려놓고 그렇지 않은 부분은 필요할 때만 메모리에 올리게 된다.
이때 메모리에 항상 상주하는 운영체제의 부분을 **커널 영역**이라 하며, 커널 영역을 제외한 나머지 영역을 **사용자 영역**이라고 한다.

### 1 ) 인터페이스

* 사용자는 커널에 직접 접근할 수 없기 때문에 운영체제가 제공하는 인터페이스를 사용해 커널에 명령을 내려야 한다.  
* 사용자와 애플리케이션은 인터페이스를 통해 커널에 명령을 전달하고, 인터페이스를 통해 실행결과를 전달받는다.  
* 운영체제가 제공하는 대표적인 인터페이스가 GUI, CLI가 있다.

### 2 ) 커널 

#### 📍 시스템 호출

<img width="613" alt="스크린샷 2023-06-23 오전 11 14 23" src="https://github.com/yaezzin/TIL/assets/97823928/86846294-aac2-4881-9f1d-f8df05c8cce2">

* 운영체제는 사용자가 실행하는 응용프로그램이 하드웨어 자원에 직접 접근하는 것을 방지하여 자원을 보호한다.
  * 만약 응용 프로그램이 CPU, 메모리, 하드 디스크에 마음대로 접근하고 조작할 수 있다면 컴퓨터 전체에 큰 악영향을 미치게 될 것이다.
* 사용자 모드로 실행되는 프로그램이 운영체제 서비스를 제공받기 위해 **시스템 호출**을 통해 운영체제에 요청을 보내 커널 모드로 전환한다.

#### 📍 드라이버

* 응용 프로그램과 커널의 인터페이스가 시스템 호출이라면 커널과 하드웨어의 인터페이스는 드라이버가 담당한다. 
* 다양한 하드웨어에 맞게 각각 인터페이스를 개발하기는 어렵기 때문에 커널은 입출력의 기본적인 부분만 제작하고, 
하드웨어의 특성을 반영한 소프트웨어인 디바이스 드라이버를 커널이 실행될 때 함께 실행되도록 한다.
