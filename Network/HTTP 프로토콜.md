## HTTP 프로토콜

> 인터넷에서 웹페이지를 전송하기 위해 사용되는 어플리케이션 계층의 프로토콜

### 특징

✔ ```무상태 Stateless```
* 이전 요청과 현재 요청 사이에는 어떤 연관성이 없으며 각각의 요청은 독립적으로 처리됨
* 따라서 서버의 부담을 줄이고 확장성을 높이는데 도움을 줌
* 클라이언트의 상태를 유지하기 위해서는 쿠키나 세션을 사용

✔ ```TCP를 사용```
* HTTP는 주로 TCP위에 동작하여 클라이언트와 서버 간의 신뢰성 있는 통신을 함

## 비지속 연결 HTTP vs 지속 연결 HTTP

### 비지속 연결

> 각각의 요청마다 새로운 TCP 연결을 맺고 응답을 받아오는 방식
* 하나의 요청을 처리한 후에는 해당 연결이 종료되고 다음 요청을 위해 새로운 연결을 맺는 것
* 이로 인해 매 요청마다 연결을 설정하고 해제하는 오버헤드가 발생하며, 지연이 발생할 수 있음
  * TCP 연결 설립에 RTT가 소요 + HTTP 요청과 응답에 RTT 소요  + 파일 전송 시간 = **2RTT + 파일 전송 시간**
  * ```RTT(round-trip time)``` : 작은 패킷이 클라이언트에서 서버까지 갔다가 돌아오는 데에 걸리는 시간 

### 지속 연결

> 하나의 TCP 연결을 통해 여러 요청과 응답을 주고받는 방식
* 연결을 유지하면서 여러 요청을 처리하므로, 연결 설정과 해제에 따른 오버헤드가 줄어들어 성능 향상

## HTTPS 프로토콜

<img width="300" alt="스크린샷 2023-08-18 오전 11 06 31" src="https://github.com/yaezzin/TIL/assets/97823928/b04b1cd7-0429-4aa9-8124-11836f47a08c">

> HTTP 위에 SSL 이나 TLS 프로토콜을 사용하여 안전한 통신을 제공하는 프로토콜

* HTTP는 텍스트 교환이기 때문에 누군가 네트워크에서 신호를 가르채면 내용이 노출되는 이슈 발생 -> ```HTTPS 사용```
* HTTPS는 텍스트를 공개키 암호화 방식으로 암호화하여 전송

#### 통신 절차

1. 클라이언트에서 서버로 연결을 시도하는 패킷을 전송
* 패킷에는 Client가 사용 가능한 ciper suite 목록이 포함
* 다양한 암호화 알고리즘, 인증 기술, 키 교환 방법 등이 포함될 수 있음
2. 서버는 클라이언트에게 SSL 인증서를 제공
3. 클라이언트는 서버의 인증서를 확인
4. 클라이언트는 서버의 공개키를 사용하여 세션 키(임시 암호화 키)를 암호화하여 서버로 전송
5. 서버는 클라이언트가 전송한 세션 키를 사용하여 데이터를 암호화하여 클라이언트에게 전송
6. 데이터 교환
7. 연결 종료

## HTTP 메시지

HTTP 메시지는 애플리케이션이 만든 데이터에 헤더를 붙여 캡슐화한 것으로, 헤더와 바디로 구성

### 💡 헤더

수신지의 주소 등 요청과 응답의 형식으로 데이터 처리에 필요한 정보를 담는 곳

|종류|설명|
|:----:|----|
|요청 헤더| - 요청 메시지를 위한 헤더로 요청에 필요한 부가정보를 담는 곳 </br> - 데이터 타입, 웹 브라우저에 대한 정보 등을  담음|
|응답 헤더| - 응답 메시지를 위한 헤더 </br> - 클라이언트에게 보낼 데이터의 타입, |
|일반 헤더| - 메시지에 관한 기본적인 정보를 제공하기 위한 목적으로 사용하는 헤더 </br> - HTTP 메세지를 생성한 일자, 클라이언트와 서버간의 연결에 관한 옵션 등|
|엔티티 헤더| - HTTP 바디가 담고 있는 데이터에 대한 부가정보를 담음 </br> - HTTP 메시지 내에 바디가 없으면 엔티티 헤더는 당연히 추가되지 않음|

### 💡 바디

* 요청이나 응답의 실제 데이터를 담고 있음
* HTTP 응답 메시지의 바디에는 클라이언트가 요청한 데이터가 삽입되는 반면, HTTP 요청 메시지는 요청 이외에 서버에 전송할 데이터가 없으므로 바디가 비어있다. ( 바디가 없는 대신 헤더에 URL을 담아서 보낸다)
* POST 메서드의 경우 클라이언트가 서버에 데이터를 전송하여 리소스를 생성해달라는 요청 메서드이므로 에외적으로 바디에 데이터가 추가된다.

## HTTP 메서드

웹 브라우저는 웹 서버에게 ```어떠한 페이지를 보내줘~!```라고 요청을 ```URL```과 ```메서드```를 사용해서 전달한다. 

### 💡 URL

* URL은 인터넷에 존재하는 리소스의 위치를 지정하는 방법
* URL의 리소스는 인터넷에서 서비스를 제공하기 위해 이용되는 문서, 이미지, 동영상 등을 의미
* URL은 인터넷에서 다양한 종류의 서비스를 제공하는 서버 컴퓨터에 저장된 파일의 위치를 표시하는 주소이며, 이 주소를 통해 클라이언트가 원하는 서비스를 응답받게 됨

### 💡 HTTP 메서드

HTTP 요청 매서드는 웹 브라우저가 웹 서버가 수행해주길 바라는 동작을 의미하며, 크게 GET, POST, PUT, PATCH, DELETE로 구성된다.

* ```GET``` : URL로 지정한 자원을 조회하기 (READ)
* ```POST``` : 서버에 자원을 생성하기 (CREATE)
* ```PUT``` : 서버에 자원을 전체 수정하기 (UPDATE)
* ```PATCH``` : 서버 자원을 일부분 수정하기 (UPDATE)
* ```DELETE``` : 서버에 자원을 삭제하기 (DELETE)
